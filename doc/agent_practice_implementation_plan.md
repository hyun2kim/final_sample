# 🤖 Unit 5: Agent Practice 구현 계획서

본 문서는 **Architecture Gym**의 다섯 번째 챕터인 **Agent Practice**를 구현하기 위한 상세 계획을 담고 있습니다. 이 챕터는 사용자가 "AI 엔지니어"가 되어 망가진 LLM 에이전트 시스템을 프롬프트 엔지니어링 및 설정을 통해 복구하는 시뮬레이션을 제공합니다.

---

## 1. 핵심 컨셉
- **문제 상황**: 환각(Hallucination)이 발생하는 RAG 시스템, 잘못된 도구(Tool)를 호출하는 에이전트 등 실제 발생 가능한 AI 시스템의 결함을 제공합니다.
- **해결 방법**: 사용자는 시스템 프롬프트 수정, RAG 파라미터(Top-k 등) 변경, 가드레일 규칙 설정을 통해 시스템을 안정화합니다.
- **게임화 요소**: 정확도(Accuracy), 환각률, 토큰 비용을 수치화하여 점수를 매기고 보상(토큰)을 지급합니다.

---

## 2. 주요 기능 및 컴포넌트

### A. Backend (Django + Celery)
1.  **문제 데이터 모델링**:
    *   `AgentProblem`: 시나리오명, 기본 망가진 설정(Prompt, Config), 테스트 케이스(Input/Expected Output) 저장.
2.  **비동기 평가 엔진 (Celery)**:
    *   사용자가 제출한 설정을 바탕으로 테스트 케이스를 실행.
    *   LLM API(OpenAI/Mock)를 호출하여 응답을 수집.
    *   평가 지표(Faithfulness, Latency, Cost) 계산.
3.  **결과 피드백 API**:
    *   실패한 케이스의 리플레이 데이터 제공 (왜 이 질문에서 환각이 발생했는지 분석).

### B. Frontend (Vue.js)
1.  **에이전트 워크스페이스**:
    *   **Prompt Editor**: 시스템 프롬프트 실시간 편집.
    *   **Config Panel**: Retriever 설정(Top-k, Chunking), Tool Schema 등을 조정하는 UI.
2.  **실시간 대시보드**:
    *   테스트 실행 시 실시간으로 게이지가 차오르는 연출.
    *   결과 수치(Accuracy 85%, Hallucination 5% 등) 시각화.
3.  **실패 리플레이 UI**:
    *   실패한 질문과 에이전트의 오답, 그리고 정답 근거를 대조해서 보여주는 비교 뷰.

---

## 3. 구현 단계 (Milestones)

### 1단계: 데이터베이스 및 API 설계 (Back-end)
- [ ] `AgentProblem`, `AgentSubmission` 모델 확장.
- [ ] 테스트 케이스 검증 로직 구현 (간단한 키워드 매칭 또는 LLM-as-a-judge).
- [ ] 제출(Submit) 엔드포인트 개발.

### 2단계: 에이전트 워크스페이스 UI (Front-end)
- [ ] 챕터 진입 시 전용 에디터 화면으로 전환되는 라우팅/컴포넌트 구현.
- [ ] 프롬프트 에디터(Monaco Editor 또는 단순 Textarea 스타일) 및 설정 패널 배치.
- [ ] 실행(Run Test) 버튼 및 진행 상태 표시줄 추가.

### 3단계: 시뮬레이션 및 평가 로직 (Celery)
- [ ] 사용자의 프롬프트를 적용하여 가상의 LLM 응답을 생성하는 모킹 시스템 구축.
- [ ] 점수 산출 알고리즘 적용 (정확도, 신뢰도, 비용 계산).

### 4단계: 게임화 및 폴리싱
- [ ] 성공 시 토큰 지급 애니메이션.
- [ ] 리더보드에 점수 반영.
- [ ] 전반적인 디자인 품질 고도화.

---

## 4. 예시 시나리오
- **시나리오**: "사내 문서 챗봇의 환각 방지"
- **문제**: 가이드에 없는 내용을 에이전트가 지어내서 답변함.
- **제약**: 반드시 "제공된 문서에 근거하여 답변하라"는 지침이 포함되어야 하며, 불확실할 경우 "모름"으로 답변해야 함.
- **성공 조건**: 환각률 0% 달성 및 정확도 90% 이상.

---

이 계획을 바탕으로 첫 번째 **Agent Practice** 환경 구축을 시작하시겠습니까? 먼저 필요한 DB 모델부터 확장을 시도해 보겠습니다.
